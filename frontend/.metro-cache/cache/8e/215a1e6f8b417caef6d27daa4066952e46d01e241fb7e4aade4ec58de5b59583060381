{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getAccessToken = getAccessToken;\n  exports.saveAccessToken = saveAccessToken;\n  exports.removeAccessToken = removeAccessToken;\n  exports.getLoginUrl = getLoginUrl;\n  /**\n   * Retrieves an access token from URL parameters or local storage.\n   *\n   * Low-level utility for manually retrieving tokens. In most cases, the Base44 client handles\n   * token management automatically. This function is useful for custom authentication flows or when you need direct access to stored tokens. Requires a browser environment and can't be used in the backend.\n   *\n   * @internal\n   *\n   * @param options - Configuration options for token retrieval.\n   * @returns The access token string if found, null otherwise.\n   *\n   * @example\n   * ```typescript\n   * // Get access token from URL or local storage\n   * const token = getAccessToken();\n   *\n   * if (token) {\n   *   console.log('User is authenticated');\n   * } else {\n   *   console.log('No token found, redirect to login');\n   * }\n   * ```\n   * @example\n   * ```typescript\n   * // Get access token from custom local storage key\n   * const token = getAccessToken({ storageKey: 'my_app_token' });\n   * ```\n   * @example\n   * ```typescript\n   * // Get access token from URL but don't save or remove it\n   * const token = getAccessToken({\n   *   saveToStorage: false,\n   *   removeFromUrl: false\n   * });\n   * ```\n   */\n  function getAccessToken(options = {}) {\n    const {\n      storageKey = \"base44_access_token\",\n      paramName = \"access_token\",\n      saveToStorage = true,\n      removeFromUrl = true\n    } = options;\n    let token = null;\n    // Try to get token from URL parameters\n    if (typeof window !== \"undefined\" && window.location) {\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        token = urlParams.get(paramName);\n        // If token found in URL\n        if (token) {\n          // Save token to local storage if requested\n          if (saveToStorage) {\n            saveAccessToken(token, {\n              storageKey\n            });\n          }\n          // Remove token from URL for security if requested\n          if (removeFromUrl) {\n            urlParams.delete(paramName);\n            const newUrl = `${window.location.pathname}${urlParams.toString() ? `?${urlParams.toString()}` : \"\"}${window.location.hash}`;\n            window.history.replaceState({}, document.title, newUrl);\n          }\n          return token;\n        }\n      } catch (e) {\n        console.error(\"Error retrieving token from URL:\", e);\n      }\n    }\n    // If no token in URL, try local storage\n    if (typeof window !== \"undefined\" && window.localStorage) {\n      try {\n        token = window.localStorage.getItem(storageKey);\n        return token;\n      } catch (e) {\n        console.error(\"Error retrieving token from local storage:\", e);\n      }\n    }\n    return null;\n  }\n  /**\n   * Saves an access token to local storage.\n   *\n   * Low-level utility for manually saving tokens. In most cases, the Base44 client handles token management automatically. This function is useful for custom authentication flows or managing custom tokens. Requires a browser environment and can't be used in the backend.\n   *\n   * @internal\n   *\n   * @param token - The access token string to save.\n   * @param options - Configuration options for saving the token.\n   * @returns Returns`true` if the token was saved successfully, `false` otherwise.\n   *\n   * @example\n   * ```typescript\n   * // Save access token after login\n   * const response = await base44.auth.loginViaEmailPassword(email, password);\n   * const success = saveAccessToken(response.access_token, {});\n   *\n   * if (success) {\n   *   console.log('User is now authenticated');\n   *   // Token is now available for future page loads\n   * }\n   * ```\n   * @example\n   * ```typescript\n   * // Save access token to local storage using custom key\n   * const success = saveAccessToken(token, {\n   *   storageKey: `my_custom_token_key`\n   * });\n   * ```\n   */\n  function saveAccessToken(token, options) {\n    const {\n      storageKey = \"base44_access_token\"\n    } = options;\n    if (typeof window === \"undefined\" || !window.localStorage || !token) {\n      return false;\n    }\n    try {\n      window.localStorage.setItem(storageKey, token);\n      // Set \"token\" that is set by the built-in SDK of platform version 2\n      window.localStorage.setItem(\"token\", token);\n      return true;\n    } catch (e) {\n      console.error(\"Error saving token to local storage:\", e);\n      return false;\n    }\n  }\n  /**\n   * Removes the access token from local storage.\n   *\n   * Low-level utility for manually removing tokens from the browser's local storage. In most cases, the Base44 client handles token management automatically. For standard logout flows, use {@linkcode AuthModule.logout | base44.auth.logout()} instead, which handles token removal and redirects automatically. This function is useful for custom authentication flows or when you need to manually remove tokens. Requires a browser environment and can't be used in the backend.\n   *\n   * @internal\n   *\n   * @param options - Configuration options for token removal.\n   * @returns Returns `true` if the token was removed successfully, `false` otherwise.\n   *\n   * @example\n   * ```typescript\n   * // Remove custom token key\n   * const success = removeAccessToken({\n   *   storageKey: 'my_custom_token_key'\n   * });\n   * ```\n   *\n   * @example\n   * ```typescript\n   * // Standard logout flow with token removal and redirect\n   * base44.auth.logout('/login');\n   * ```\n   */\n  function removeAccessToken(options) {\n    const {\n      storageKey = \"base44_access_token\"\n    } = options;\n    if (typeof window === \"undefined\" || !window.localStorage) {\n      return false;\n    }\n    try {\n      window.localStorage.removeItem(storageKey);\n      return true;\n    } catch (e) {\n      console.error(\"Error removing token from local storage:\", e);\n      return false;\n    }\n  }\n  /**\n   * Constructs the absolute URL for the login page with a redirect parameter.\n   *\n   * Low-level utility for building login URLs. For standard login redirects, use {@linkcode AuthModule.redirectToLogin | base44.auth.redirectToLogin()} instead, which handles this automatically. This function is useful when you need to construct login URLs without a client instance or for custom authentication flows.\n   *\n   * @internal\n   *\n   * @param nextUrl - The URL to redirect to after successful login.\n   * @param options - Configuration options.\n   * @returns The complete login URL with encoded redirect parameters.\n   *\n   * @example\n   * ```typescript\n   * // Redirect to login page\n   * const loginUrl = getLoginUrl('/dashboard', {\n   *   serverUrl: 'https://base44.app',\n   *   appId: 'my-app-123'\n   * });\n   * window.location.href = loginUrl;\n   * // User will be redirected back to /dashboard after login\n   * ```\n   */\n  function getLoginUrl(nextUrl, options) {\n    const {\n      serverUrl,\n      appId,\n      loginPath = \"/login\"\n    } = options;\n    if (!serverUrl || !appId) {\n      throw new Error(\"serverUrl and appId are required to construct login URL\");\n    }\n    const encodedRedirectUrl = encodeURIComponent(nextUrl || (typeof window !== \"undefined\" ? window.location.href : \"\"));\n    return `${serverUrl}${loginPath}?from_url=${encodedRedirectUrl}&app_id=${appId}`;\n  }\n});","lineCount":211,"map":[[7,2,37,0,"exports"],[7,9,37,0],[7,10,37,0,"getAccessToken"],[7,24,37,0],[7,27,37,0,"getAccessToken"],[7,41,37,0],[8,2,106,0,"exports"],[8,9,106,0],[8,10,106,0,"saveAccessToken"],[8,25,106,0],[8,28,106,0,"saveAccessToken"],[8,43,106,0],[9,2,146,0,"exports"],[9,9,146,0],[9,10,146,0,"removeAccessToken"],[9,27,146,0],[9,30,146,0,"removeAccessToken"],[9,47,146,0],[10,2,182,0,"exports"],[10,9,182,0],[10,10,182,0,"getLoginUrl"],[10,21,182,0],[10,24,182,0,"getLoginUrl"],[10,35,182,0],[11,2,1,0],[12,0,2,0],[13,0,3,0],[14,0,4,0],[15,0,5,0],[16,0,6,0],[17,0,7,0],[18,0,8,0],[19,0,9,0],[20,0,10,0],[21,0,11,0],[22,0,12,0],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,0,28,0],[39,0,29,0],[40,0,30,0],[41,0,31,0],[42,0,32,0],[43,0,33,0],[44,0,34,0],[45,0,35,0],[46,0,36,0],[47,2,37,7],[47,11,37,16,"getAccessToken"],[47,25,37,30,"getAccessToken"],[47,26,37,31,"options"],[47,33,37,38],[47,36,37,41],[47,37,37,42],[47,38,37,43],[47,40,37,45],[48,4,38,4],[48,10,38,10],[49,6,38,12,"storageKey"],[49,16,38,22],[49,19,38,25],[49,40,38,46],[50,6,38,48,"paramName"],[50,15,38,57],[50,18,38,60],[50,32,38,74],[51,6,38,76,"saveToStorage"],[51,19,38,89],[51,22,38,92],[51,26,38,96],[52,6,38,98,"removeFromUrl"],[52,19,38,111],[52,22,38,114],[53,4,38,120],[53,5,38,121],[53,8,38,124,"options"],[53,15,38,131],[54,4,39,4],[54,8,39,8,"token"],[54,13,39,13],[54,16,39,16],[54,20,39,20],[55,4,40,4],[56,4,41,4],[56,8,41,8],[56,15,41,15,"window"],[56,21,41,21],[56,26,41,26],[56,37,41,37],[56,41,41,41,"window"],[56,47,41,47],[56,48,41,48,"location"],[56,56,41,56],[56,58,41,58],[57,6,42,8],[57,10,42,12],[58,8,43,12],[58,14,43,18,"urlParams"],[58,23,43,27],[58,26,43,30],[58,30,43,34,"URLSearchParams"],[58,45,43,49],[58,46,43,50,"window"],[58,52,43,56],[58,53,43,57,"location"],[58,61,43,65],[58,62,43,66,"search"],[58,68,43,72],[58,69,43,73],[59,8,44,12,"token"],[59,13,44,17],[59,16,44,20,"urlParams"],[59,25,44,29],[59,26,44,30,"get"],[59,29,44,33],[59,30,44,34,"paramName"],[59,39,44,43],[59,40,44,44],[60,8,45,12],[61,8,46,12],[61,12,46,16,"token"],[61,17,46,21],[61,19,46,23],[62,10,47,16],[63,10,48,16],[63,14,48,20,"saveToStorage"],[63,27,48,33],[63,29,48,35],[64,12,49,20,"saveAccessToken"],[64,27,49,35],[64,28,49,36,"token"],[64,33,49,41],[64,35,49,43],[65,14,49,45,"storageKey"],[66,12,49,56],[66,13,49,57],[66,14,49,58],[67,10,50,16],[68,10,51,16],[69,10,52,16],[69,14,52,20,"removeFromUrl"],[69,27,52,33],[69,29,52,35],[70,12,53,20,"urlParams"],[70,21,53,29],[70,22,53,30,"delete"],[70,28,53,36],[70,29,53,37,"paramName"],[70,38,53,46],[70,39,53,47],[71,12,54,20],[71,18,54,26,"newUrl"],[71,24,54,32],[71,27,54,35],[71,30,54,38,"window"],[71,36,54,44],[71,37,54,45,"location"],[71,45,54,53],[71,46,54,54,"pathname"],[71,54,54,62],[71,57,54,65,"urlParams"],[71,66,54,74],[71,67,54,75,"toString"],[71,75,54,83],[71,76,54,84],[71,77,54,85],[71,80,54,88],[71,84,54,92,"urlParams"],[71,93,54,101],[71,94,54,102,"toString"],[71,102,54,110],[71,103,54,111],[71,104,54,112],[71,106,54,114],[71,109,54,117],[71,111,54,119],[71,114,54,122,"window"],[71,120,54,128],[71,121,54,129,"location"],[71,129,54,137],[71,130,54,138,"hash"],[71,134,54,142],[71,136,54,144],[72,12,55,20,"window"],[72,18,55,26],[72,19,55,27,"history"],[72,26,55,34],[72,27,55,35,"replaceState"],[72,39,55,47],[72,40,55,48],[72,41,55,49],[72,42,55,50],[72,44,55,52,"document"],[72,52,55,60],[72,53,55,61,"title"],[72,58,55,66],[72,60,55,68,"newUrl"],[72,66,55,74],[72,67,55,75],[73,10,56,16],[74,10,57,16],[74,17,57,23,"token"],[74,22,57,28],[75,8,58,12],[76,6,59,8],[76,7,59,9],[76,8,60,8],[76,15,60,15,"e"],[76,16,60,16],[76,18,60,18],[77,8,61,12,"console"],[77,15,61,19],[77,16,61,20,"error"],[77,21,61,25],[77,22,61,26],[77,56,61,60],[77,58,61,62,"e"],[77,59,61,63],[77,60,61,64],[78,6,62,8],[79,4,63,4],[80,4,64,4],[81,4,65,4],[81,8,65,8],[81,15,65,15,"window"],[81,21,65,21],[81,26,65,26],[81,37,65,37],[81,41,65,41,"window"],[81,47,65,47],[81,48,65,48,"localStorage"],[81,60,65,60],[81,62,65,62],[82,6,66,8],[82,10,66,12],[83,8,67,12,"token"],[83,13,67,17],[83,16,67,20,"window"],[83,22,67,26],[83,23,67,27,"localStorage"],[83,35,67,39],[83,36,67,40,"getItem"],[83,43,67,47],[83,44,67,48,"storageKey"],[83,54,67,58],[83,55,67,59],[84,8,68,12],[84,15,68,19,"token"],[84,20,68,24],[85,6,69,8],[85,7,69,9],[85,8,70,8],[85,15,70,15,"e"],[85,16,70,16],[85,18,70,18],[86,8,71,12,"console"],[86,15,71,19],[86,16,71,20,"error"],[86,21,71,25],[86,22,71,26],[86,66,71,70],[86,68,71,72,"e"],[86,69,71,73],[86,70,71,74],[87,6,72,8],[88,4,73,4],[89,4,74,4],[89,11,74,11],[89,15,74,15],[90,2,75,0],[91,2,76,0],[92,0,77,0],[93,0,78,0],[94,0,79,0],[95,0,80,0],[96,0,81,0],[97,0,82,0],[98,0,83,0],[99,0,84,0],[100,0,85,0],[101,0,86,0],[102,0,87,0],[103,0,88,0],[104,0,89,0],[105,0,90,0],[106,0,91,0],[107,0,92,0],[108,0,93,0],[109,0,94,0],[110,0,95,0],[111,0,96,0],[112,0,97,0],[113,0,98,0],[114,0,99,0],[115,0,100,0],[116,0,101,0],[117,0,102,0],[118,0,103,0],[119,0,104,0],[120,0,105,0],[121,2,106,7],[121,11,106,16,"saveAccessToken"],[121,26,106,31,"saveAccessToken"],[121,27,106,32,"token"],[121,32,106,37],[121,34,106,39,"options"],[121,41,106,46],[121,43,106,48],[122,4,107,4],[122,10,107,10],[123,6,107,12,"storageKey"],[123,16,107,22],[123,19,107,25],[124,4,107,47],[124,5,107,48],[124,8,107,51,"options"],[124,15,107,58],[125,4,108,4],[125,8,108,8],[125,15,108,15,"window"],[125,21,108,21],[125,26,108,26],[125,37,108,37],[125,41,108,41],[125,42,108,42,"window"],[125,48,108,48],[125,49,108,49,"localStorage"],[125,61,108,61],[125,65,108,65],[125,66,108,66,"token"],[125,71,108,71],[125,73,108,73],[126,6,109,8],[126,13,109,15],[126,18,109,20],[127,4,110,4],[128,4,111,4],[128,8,111,8],[129,6,112,8,"window"],[129,12,112,14],[129,13,112,15,"localStorage"],[129,25,112,27],[129,26,112,28,"setItem"],[129,33,112,35],[129,34,112,36,"storageKey"],[129,44,112,46],[129,46,112,48,"token"],[129,51,112,53],[129,52,112,54],[130,6,113,8],[131,6,114,8,"window"],[131,12,114,14],[131,13,114,15,"localStorage"],[131,25,114,27],[131,26,114,28,"setItem"],[131,33,114,35],[131,34,114,36],[131,41,114,43],[131,43,114,45,"token"],[131,48,114,50],[131,49,114,51],[132,6,115,8],[132,13,115,15],[132,17,115,19],[133,4,116,4],[133,5,116,5],[133,6,117,4],[133,13,117,11,"e"],[133,14,117,12],[133,16,117,14],[134,6,118,8,"console"],[134,13,118,15],[134,14,118,16,"error"],[134,19,118,21],[134,20,118,22],[134,58,118,60],[134,60,118,62,"e"],[134,61,118,63],[134,62,118,64],[135,6,119,8],[135,13,119,15],[135,18,119,20],[136,4,120,4],[137,2,121,0],[138,2,122,0],[139,0,123,0],[140,0,124,0],[141,0,125,0],[142,0,126,0],[143,0,127,0],[144,0,128,0],[145,0,129,0],[146,0,130,0],[147,0,131,0],[148,0,132,0],[149,0,133,0],[150,0,134,0],[151,0,135,0],[152,0,136,0],[153,0,137,0],[154,0,138,0],[155,0,139,0],[156,0,140,0],[157,0,141,0],[158,0,142,0],[159,0,143,0],[160,0,144,0],[161,0,145,0],[162,2,146,7],[162,11,146,16,"removeAccessToken"],[162,28,146,33,"removeAccessToken"],[162,29,146,34,"options"],[162,36,146,41],[162,38,146,43],[163,4,147,4],[163,10,147,10],[164,6,147,12,"storageKey"],[164,16,147,22],[164,19,147,25],[165,4,147,47],[165,5,147,48],[165,8,147,51,"options"],[165,15,147,58],[166,4,148,4],[166,8,148,8],[166,15,148,15,"window"],[166,21,148,21],[166,26,148,26],[166,37,148,37],[166,41,148,41],[166,42,148,42,"window"],[166,48,148,48],[166,49,148,49,"localStorage"],[166,61,148,61],[166,63,148,63],[167,6,149,8],[167,13,149,15],[167,18,149,20],[168,4,150,4],[169,4,151,4],[169,8,151,8],[170,6,152,8,"window"],[170,12,152,14],[170,13,152,15,"localStorage"],[170,25,152,27],[170,26,152,28,"removeItem"],[170,36,152,38],[170,37,152,39,"storageKey"],[170,47,152,49],[170,48,152,50],[171,6,153,8],[171,13,153,15],[171,17,153,19],[172,4,154,4],[172,5,154,5],[172,6,155,4],[172,13,155,11,"e"],[172,14,155,12],[172,16,155,14],[173,6,156,8,"console"],[173,13,156,15],[173,14,156,16,"error"],[173,19,156,21],[173,20,156,22],[173,62,156,64],[173,64,156,66,"e"],[173,65,156,67],[173,66,156,68],[174,6,157,8],[174,13,157,15],[174,18,157,20],[175,4,158,4],[176,2,159,0],[177,2,160,0],[178,0,161,0],[179,0,162,0],[180,0,163,0],[181,0,164,0],[182,0,165,0],[183,0,166,0],[184,0,167,0],[185,0,168,0],[186,0,169,0],[187,0,170,0],[188,0,171,0],[189,0,172,0],[190,0,173,0],[191,0,174,0],[192,0,175,0],[193,0,176,0],[194,0,177,0],[195,0,178,0],[196,0,179,0],[197,0,180,0],[198,0,181,0],[199,2,182,7],[199,11,182,16,"getLoginUrl"],[199,22,182,27,"getLoginUrl"],[199,23,182,28,"nextUrl"],[199,30,182,35],[199,32,182,37,"options"],[199,39,182,44],[199,41,182,46],[200,4,183,4],[200,10,183,10],[201,6,183,12,"serverUrl"],[201,15,183,21],[202,6,183,23,"appId"],[202,11,183,28],[203,6,183,30,"loginPath"],[203,15,183,39],[203,18,183,42],[204,4,183,51],[204,5,183,52],[204,8,183,55,"options"],[204,15,183,62],[205,4,184,4],[205,8,184,8],[205,9,184,9,"serverUrl"],[205,18,184,18],[205,22,184,22],[205,23,184,23,"appId"],[205,28,184,28],[205,30,184,30],[206,6,185,8],[206,12,185,14],[206,16,185,18,"Error"],[206,21,185,23],[206,22,185,24],[206,79,185,81],[206,80,185,82],[207,4,186,4],[208,4,187,4],[208,10,187,10,"encodedRedirectUrl"],[208,28,187,28],[208,31,187,31,"encodeURIComponent"],[208,49,187,49],[208,50,187,50,"nextUrl"],[208,57,187,57],[208,62,187,62],[208,69,187,69,"window"],[208,75,187,75],[208,80,187,80],[208,91,187,91],[208,94,187,94,"window"],[208,100,187,100],[208,101,187,101,"location"],[208,109,187,109],[208,110,187,110,"href"],[208,114,187,114],[208,117,187,117],[208,119,187,119],[208,120,187,120],[208,121,187,121],[209,4,188,4],[209,11,188,11],[209,14,188,14,"serverUrl"],[209,23,188,23],[209,26,188,26,"loginPath"],[209,35,188,35],[209,48,188,48,"encodedRedirectUrl"],[209,66,188,66],[209,77,188,77,"appId"],[209,82,188,82],[209,84,188,84],[210,2,189,0],[211,0,189,1],[211,3]],"functionMap":{"names":["<global>","getAccessToken","saveAccessToken","removeAccessToken","getLoginUrl"],"mappings":"AAA;OCoC;CDsC;OE+B;CFe;OGyB;CHa;OIuB;CJO"},"hasCjsExports":false},"type":"js/module"}]}